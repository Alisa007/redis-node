{"version":3,"sources":["../src/messenger.js"],"names":[],"mappings":"AAAA;;;;;;;;;AAEA;;IAAY,K;;;;;;AACZ,IAAM,SAAS,MAAM,YAAN,EAAf;;IAEa,S,WAAA,S;;;;;;;qCACI;AACT,iBAAK,GAAL,GAAW,KAAK,GAAL,IAAY,CAAvB;AACA,mBAAO,KAAK,GAAL,EAAP;AACH;;;qCAEY,G,EAAK,Q,EAAU;AACxB,qBAAS,UAAT,GAAsB;AAClB,oBAAM,QAAQ,KAAK,MAAL,KAAgB,GAA9B;AACA,yBAAS,KAAT,EAAgB,GAAhB;AACH;;AAED,uBAAW,UAAX,EAAuB,CAAvB;AACH;;;kCAES,E,EAAI;AACV,mBAAO,MAAP,CAAc,QAAd,EAAwB,CAAxB,EAA2B,CAAC,CAA5B,EAA+B,UAAU,CAAV,EAAa,MAAb,EAAqB;AAChD,wBAAQ,GAAR,CAAY,MAAZ;AACA,uBAAO,GAAP,CAAW,QAAX;;AAEA;AACH,aALD;AAMH;;;mCAEU,G,EAAK;AACZ,oBAAQ,GAAR,CAAY,GAAZ;AACA,mBAAO,KAAP,CAAa,QAAb,EAAuB,GAAvB;AACH","file":"messenger.js","sourcesContent":["'use strict';\n\nimport * as redis from 'redis';\nconst client = redis.createClient();\n\nexport class Messenger {\n    getMessage() {\n        this.cnt = this.cnt || 0;\n        return this.cnt++;\n    }\n\n    eventHandler(msg, callback) {\n        function onComplete() {\n            const error = Math.random() > 0.1;\n            callback(error, msg);\n        }\n\n        setTimeout(onComplete, 0);\n    }\n\n    getErrors(cb) {\n        client.lrange('errors', 0, -1, function (_, errors) {\n            console.log(errors);\n            client.del('errors');\n\n            cb();\n        });\n    }\n    \n    addMessage(msg) {\n        console.log(msg);\n        client.lpush('errors', msg);\n    }\n}"]}